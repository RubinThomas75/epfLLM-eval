# Required libraries
import numpy as np
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity
from fuzzywuzzy import fuzz

# List of prompts
prompts = [ "What are the common symptoms of COVID-19?", "What is the treatment for a common cold?", "What causes high blood pressure?", "What is the main cause of type 2 diabetes?", "How is asthma treated?", "What is a stroke?", "What are the symptoms of a heart attack?", "What is the treatment for pneumonia?", "What are the causes of back pain?", "How is tuberculosis diagnosed?", "What is the treatment for hypothyroidism?", "What are the risks of smoking?", "What is the function of the liver?", "What are the signs of dehydration?", "What causes Alzheimerâ€™s disease?", "How do you treat high cholesterol?", "What is a common cause of sudden weight loss?", "How do you treat an allergic reaction?", "What are the symptoms of hepatitis?", "What causes rheumatoid arthritis?", "What is the treatment for osteoporosis?", "What is the role of insulin in the body?", "What are the signs of a bacterial infection?", "What causes acid reflux?", "How is a heart murmur diagnosed?", "What are the symptoms of appendicitis?", "What is the treatment for a sprained ankle?", "What are the symptoms of depression?", "What is the treatment for a stroke?", "What causes insomnia?", "How do you treat a broken bone?", "What are the side effects of chemotherapy?", "What is sleep apnea?", "What causes acne?", "How is gout treated?", "What is the treatment for a seizure?", "What is the cause of high cholesterol?", "How do you diagnose diabetes?", "What is the treatment for a sinus infection?", "How do you prevent a stroke?", "What are the side effects of antidepressants?", "What is a common cause of sudden chest pain?", "What are the causes of a stroke?", "What is the role of the thyroid gland in metabolism?", "How is diabetes managed with lifestyle changes?", "What are common causes of fatigue in adults?", "How is high blood pressure diagnosed?", "What is a common cause of dizziness?", "What are the risk factors for developing breast cancer?", "How is rheumatoid arthritis diagnosed?", "What is a mammogram used for?", "What is the purpose of a blood glucose test?", "How can stress be managed to prevent health issues?", "What is the treatment for bacterial pneumonia?", "What is the difference between a heart attack and a stroke?", "What causes chronic fatigue syndrome?", "How do doctors treat a herniated disc?", "What are the signs of dehydration in children?", "What is the role of a cardiologist?", "What is an EKG used for?", "How do you treat asthma attacks?", "What are the causes of acne in adults?", "How is the flu treated?", "What are the symptoms of a brain tumor?", "How is hypertension managed?", "What is the function of the immune system?", "How does smoking affect the lungs?", "What are the signs of an allergic reaction?", "What are the side effects of oral contraceptives?", "What is the most common cause of dizziness in elderly individuals?", "How is dehydration treated?", "What are the symptoms of dehydration in infants?", "How do you prevent diabetes type 2?", "What is the treatment for IBS (Irritable Bowel Syndrome)?", "What is the difference between type 1 and type 2 diabetes?", "How is colorectal cancer diagnosed?", "What is a colonoscopy used for?", "What is a pacemaker used for?", "How do doctors test for HIV?", "What is the difference between a cold and the flu?", "How is a kidney stone treated?", "What causes a fever?", "What are the symptoms of chronic obstructive pulmonary disease (COPD)?", "How is liver cirrhosis diagnosed?", "What is a chest X-ray used for?", "How is multiple sclerosis diagnosed?", "What are common causes of shortness of breath?", "How do you treat a burn?", "What causes a headache after eating?", "How is bipolar disorder treated?", "What is the difference between an MRI and a CT scan?", "How do you treat food poisoning?", "What are the causes of bloating and gas?" ]

# List of corresponding ground truths
ground_truth = [ "Fever, cough, fatigue, shortness of breath, loss of taste or smell, sore throat, body aches.", "Rest, hydration, over-the-counter pain relievers (ibuprofen or acetaminophen), decongestants, and cough syrup.", "Genetics, obesity, lack of exercise, poor diet (high salt), smoking, alcohol consumption, and stress.", "Insulin resistance due to obesity, sedentary lifestyle, and poor diet.", "Inhalers (bronchodilators), corticosteroids, avoiding triggers, and lifestyle modifications.", "A stroke occurs when there is an interruption of blood flow to the brain, leading to brain cell death.", "Chest pain, shortness of breath, nausea, lightheadedness, pain in the arm, back, or jaw.", "Antibiotics (for bacterial pneumonia), rest, fluids, and in some cases, oxygen therapy.", "Muscle strain, poor posture, herniated discs, osteoarthritis, and spinal stenosis.", "Chest X-ray, sputum culture, TB skin test, or blood tests.", "Synthetic thyroid hormone replacement (levothyroxine).", "Lung cancer, heart disease, stroke, respiratory infections, chronic obstructive pulmonary disease (COPD).", "Detoxification, protein synthesis, production of bile, metabolism of fats, carbohydrates, and proteins.", "Dry mouth, fatigue, dark-colored urine, dizziness, confusion.", "The exact cause is unknown, but factors include genetics, aging, and environmental influences.", "Statins, lifestyle changes (healthy diet, exercise), and sometimes other lipid-lowering medications.", "Hyperthyroidism, diabetes, cancer, gastrointestinal issues, and malnutrition.", "Antihistamines, corticosteroids, and in severe cases, epinephrine.", "Fatigue, jaundice, abdominal pain, loss of appetite, nausea, and dark urine.", "Autoimmune disorder where the immune system attacks the joints.", "Calcium and vitamin D supplementation, weight-bearing exercises, and medications like bisphosphonates.", "Insulin helps regulate blood sugar by allowing glucose to enter cells for energy.", "Fever, chills, redness, swelling, and pus or drainage from a wound.", "Weakening of the lower esophageal sphincter, obesity, smoking, and certain foods.", "Physical examination with a stethoscope, echocardiogram, and sometimes an EKG.", "Abdominal pain (starting around the belly button), nausea, vomiting, fever, and loss of appetite.", "R.I.C.E (Rest, Ice, Compression, Elevation), pain relievers, and physical therapy if needed.", "Persistent sadness, loss of interest, fatigue, changes in appetite or sleep, and thoughts of death or suicide.", "Immediate medical treatment, thrombolytic drugs (if within the first few hours), physical therapy.", "Stress, anxiety, poor sleep habits, medical conditions, and certain medications.", "Immobilization (cast or splint), pain management, and sometimes surgery.", "Nausea, vomiting, hair loss, fatigue, weakened immune system, and mouth sores.", "A disorder where breathing repeatedly stops and starts during sleep, often causing daytime fatigue.", "Excess oil production, clogged hair follicles, bacteria, and hormones (especially during puberty).", "Anti-inflammatory drugs (NSAIDs, colchicine), uric acid-lowering medications, and dietary changes.", "Antiepileptic drugs, lifestyle modifications, and in some cases, surgery.", "Diet high in saturated fats, genetics, lack of physical activity, and smoking.", "Fasting blood glucose test, oral glucose tolerance test, or A1C test.", "Decongestants, nasal sprays, rest, and sometimes antibiotics.", "Controlling blood pressure, cholesterol levels, and diabetes, avoiding smoking, and maintaining a healthy diet.", "Nausea, weight gain, sleep disturbances, sexual dysfunction, and dry mouth.", "Angina, heart attack, acid reflux, or a panic attack.", "A blocked artery or bleeding in the brain due to high blood pressure, heart disease, or aneurysms.", "The thyroid helps regulate metabolism, growth, and energy levels by producing hormones (T3 and T4).", "Exercise, weight loss, healthy eating, and blood sugar monitoring.", "Stress, sleep deprivation, anemia, thyroid issues, and chronic illnesses.", "High blood pressure, high cholesterol, obesity, and smoking.", "Benign paroxysmal positional vertigo, dehydration, or a vestibular disorder.", "Obesity, family history, age, and hormone replacement therapy.", "Joint pain, swelling, and stiffness, diagnosed through physical examination and blood tests.", "A mammogram detects changes in breast tissue, including early signs of cancer.", "A blood glucose test measures your blood sugar levels to diagnose diabetes or monitor its management.", "Regular physical activity, meditation, deep breathing exercises, and a healthy work-life balance.", "Antibiotics, oxygen, fluids, and sometimes mechanical ventilation.", "Chest pain and pressure, nausea, dizziness, and shortness of breath are common symptoms.", "Muscle weakness, loss of balance, slurred speech, and tremors.", "Physical therapy, stress management, and in some cases, surgery to remove herniated disc material.", "Clear fluids, rehydration solutions, and electrolyte replacement.", "Regular physical activity, healthy diet, no smoking, and maintaining normal cholesterol and blood pressure.", "Cognitive therapy, medications, exercise, and avoiding excessive alcohol consumption.", "Drugs like insulin or sulfonylureas to regulate blood sugar levels and lifestyle changes.", "Medications, heart monitoring, and exercise therapy.", "Corticosteroids or DMARDs (disease-modifying antirheumatic drugs), and joint protection techniques.", "Stress reduction, weight control, avoiding triggers like high-fat foods.", "MRI, physical exams, and sometimes a biopsy." ]

# Function to compute both cosine similarity and fuzzy matching score
def evaluate_responses(response_index, generated_response):
    # Create a TF-IDF Vectorizer for cosine similarity
    vectorizer = TfidfVectorizer()

    # Cosine Similarity
    tfidf_matrix = vectorizer.fit_transform([generated_response, ground_truth[response_index]])
    cosine_sim = cosine_similarity(tfidf_matrix[0:1], tfidf_matrix[1:2])[0][0]

    # Fuzzy Matching (using fuzzywuzzy for partial ratio)
    fuzzy_score = fuzz.partial_ratio(generated_response.lower(), ground_truth[response_index].lower())

    return cosine_sim, fuzzy_score
